<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta name="generator" content="HTML Tidy for Linux (vers 25 March 2009), see www.w3.org" />
    
    <title>Manpage of rpmrebuild</title>
    <style type="text/css">
    /*<![CDATA[*/
    p.c3 {font-weight: bold}
    dd.c2 {font-weight: bold}
    dt.c1 {font-weight: bold}
    /*]]>*/
    </style>
    <link rel="stylesheet" type="text/css" href="project.css" />
    
  </head>
  
  <body>
    <h1>rpmrebuild</h1>
    Section: rpm tools (1)<br />
    Updated: 2.10-2<br />
    <a href="#index">Index</a> <a name="lbAB" id="lbAB"> </a>
    
    <h2>NAME</h2>
    rpmrebuild - a tool to build an rpm package from an installed package
    
    <p><a name="lbAC" id="lbAC"> </a></p>
    
    <h2>SYNOPSIS</h2>
    rpmrebuild [<i>option</i>] &lt;<i>packagename</i>&gt;
    
    <p><a name="lbAD" id="lbAD"> </a></p>
    
    <h2>DESCRIPTION</h2>
    rpmrebuild is a tool to build easily rpm package. it can be used to build an rpm file from an
    installed package (lost rpm) or to quickly make change to a package: just have your change on installed files and
    call rpmrebuild.
    
    <p><a name="lbAE" id="lbAE"> </a></p>
    
    <h2>OPTIONS</h2>
    
    
    <dl>
      <dt class="c1">-5 --md5-compat-digest</dt>
      
      <dd>use rpm 4.4 compatible digest (md5)</dd>
      
      <dt><b>-a, --additional</b>=&lt;<i>flags</i>&gt;</dt>
      
      <dd>pass additional flags to <b>rpmbuild</b></dd>
      
      <dt class="c1">-b, --batch</dt>
      
      <dd>work in batch mode (no interactive query if files change)</dd>
      
      <dt class="c1">--cap-from-db (default)</dt>
      
      <dd>set files posix capabilities as saved in rpm database</dd>
      
      <dt class="c1">--cap-from-fs</dt>
      
      <dd>set files posix capabilities as installed files (do not force to original capabilities, saved in rpm
      database)</dd>
      
      <dt><b>-c, --comment-missing</b>=&lt;<i>yes</i>|<i>no</i>&gt;</dt>
      
      <dd>comment out in the specfile missing files. Default: <b>no</b>.</dd>
      
      <dt><b>-D, --define</b>=&lt;<i>defines</i>&gt;</dt>
      
      <dd>defines to be passed to rpmbuild.</dd>
      
      <dt><b>-d, --directory</b>=&lt;<i>directory</i>&gt;</dt>
      
      <dd>rpm package result will be written in <i>directory</i>.</dd>
      
      <dt class="c1">-e, --edit-spec</dt>
      
      <dd>alias to --edit-whole.</dd>
      
      <dt><b>-f, --filter</b>=&lt;<i>command</i>&gt;</dt>
      
      <dd>alias for <b>--change-spec-whole</b></dd>
      
      <dt class="c1">-h, --help</dt>
      
      <dd>output help information about all, but plugins option and exit.</dd>
      
      <dt class="c1">--help-plugins</dt>
      
      <dd>output help information about plugins options and exit.</dd>
      
      <dt><b>-i, --include</b>=&lt;<i>file</i>&gt;</dt>
      
      <dd>read more options from the file 'file'.</dd>
      
      <dt class="c1">-k, --keep-perm</dt>
      
      <dd class="c2">alias to --pug-from-fs</dd>
      
      <dt class="c1">-l, --list-plugin</dt>
      
      <dd>list installed plugins</dd>
      
      <dt><b>-m, --modify</b>=&lt;<i>command</i>&gt;</dt>
      
      <dd>alias to <b>--change-files</b></dd>
      
      <dt class="c1">-n, --notest-install</dt>
      
      <dd>do not test install at end of rpm building</dd>
      
      <dt class="c1">-p, --package</dt>
      
      <dd>use package file, not installed rpm (this option is like rpm's -p option)</dd>
      
      <dt class="c1">--pug-from-db (default)</dt>
      
      <dd>set files permission, uid and gid as saved in rpm database</dd>
      
      <dt class="c1">--pug-from-fs</dt>
      
      <dd>keep installed files permission, uid and gid (do not force to original files permission, uid and gid saved in
      rpm database)</dd>
      
      <dt class="c1">-P, --autoprovide</dt>
      
      <dd>use rpm scripts to compute provides</dd>
      
      <dt class="c1">-R, --autorequire</dt>
      
      <dd>use rpm scripts to compute requires</dd>
      
      <dt><b>-r, --release</b>=&lt;<i>version</i>&gt;</dt>
      
      <dd>specify a release</dd>
      
      <dt><b>-s, --spec-only</b>=&lt;<i>specfile</i>&gt;</dt>
      
      <dd>do not rebuild package, only generate specfile. Can't be used with <b>--change-files</b>.</dd>
      
      <dt class="c1">-v, --verbose</dt>
      
      <dd>verbose output</dd>
      
      <dt class="c1">--debug</dt>
      
      <dd>for debugging purposes : do not remove temporary files at end of work</dd>
      
      <dt class="c1">-V, --version</dt>
      
      <dd>output version information and exit.</dd>
      
      <dt class="c1">-w, --warning</dt>
      
      <dd>display some warnings if it detects a potential problem (for example, spec file which contains filename with
      globbing char).</dd>
      
      <dt><b>-y, --verify</b>=&lt;<i>yes</i>|<i>no</i>&gt;</dt>
      
      <dd>Turn on/off package verifying before processing. Default: <b>yes</b>. Can be turn off to get better
      performance.</dd>
    </dl>
    
    <p>PLUGINS OPTION</p>
    
    <p>rpmrebuild use may be extended with plugins. Plugins are searched in <b>/usr/lib/rpmrebuild/plugins</b> and then
    in $PATH</p>
    
    <dl>
      <dt><b>--change-files</b>=&lt;<i>command</i>&gt;</dt>
      
      <dd>Invoke plugin which change package's files. Note, that these files are copied before to the temporary location,
      so installed package's files not changed.<br />
      Can't be used with <b>--spec-only</b></dd>
    </dl>
    
    <p><b>--change-spec-whole</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-whole</b></p>
    
    <dl>
      <dd class="c2">Invoke plugin or editor to change specfile.</dd>
    </dl>
    
    <p><b>--change-spec-preamble</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-preamble</b></p>
    
    <p><b>--change-spec-conflicts</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-conflicts</b></p>
    
    <p><b>--change-spec-obsoletes</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-obsoletes</b></p>
    
    <p><b>--change-spec-provides</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-provides</b></p>
    
    <p><b>--change-spec-requires</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-requires</b></p>
    
    <p><b>--change-spec-suggests</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-suggests</b></p>
    
    <p><b>--change-spec-enhances</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-enhances</b></p>
    
    <p><b>--change-spec-description</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-description</b></p>
    
    <p><b>--change-spec-files</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-files</b></p>
    
    <p><b>--change-spec-triggers</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-triggers</b></p>
    
    <p><b>--change-spec-pre</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-pre</b></p>
    
    <p><b>--change-spec-post</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-post</b></p>
    
    <p><b>--change-spec-preun</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-preun</b></p>
    
    <p><b>--change-spec-postun</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-postun</b></p>
    
    <p><b>--change-spec-pretrans</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-postrans</b></p>
    
    <p><b>--change-spec-postrans</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-postrans</b></p>
    
    <p><b>--change-spec-verifyscript</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-verifyscript</b></p>
    
    <p><b>--change-spec-changelog</b>=&lt;<i>command</i>&gt;<br />
    <b>--edit-changelog</b></p>
    
    <dl>
      <dd><b>Invoke plugin or editor to change preamble, conflicts, obsoletes, provides, requires, description, files,
	triggers, preinstall, postinstall, preuninstall, postuninstall, verifyscript or changelog.<br />
      None of these options can be specified after --change-spec-whole</b> or <b>--edit-whole</b>.</dd>
    </dl><a name="lbAF" id="lbAF"> </a>
    
    <h2>INCLUDE FILES</h2>
    Any of the rpmrebuild's LONG option can be specified on the command line or in the include file
    (file specified with -i/--include option).
    
    <p>Include files are also searched in the <b>/usr/lib/rpmrebuild/plugins</b> directory.</p>
    
    <p>Include file has following syntax.</p>
    
    <dl>
      <dt class="c1">comments</dt>
      
      <dd>Any line begin with '#' or some number of whitespace and '#'.</dd>
      
      <dt class="c1">empty line</dt>
      
      <dd>empty line are ignored.</dd>
      
      <dt class="c1">option line</dt>
      
      <dd>
      option line is very similar to the option written on the command line. the limitation of the option line in the
      file are:
      
      <dl>
	<dd>
	<dl>
	  <dt>long option</dt>
	  
	  <dd>should be used ONLY long options WITHOUT leading --.</dd>
	  
	  <dt>option's argument</dt>
	  
	  <dd>option's argument should not be quoted.</dd>
	  
	  <dt>separator</dt>
	  
	  <dd>option's argument should be separated from option by spaces or tabs, not by equal ('=') sign.</dd>
	  
	  <dt>non-optional argument(s)</dt>
	  
	  <dd>package name (non-optional argument) shouldn't be specified in the include file.</dd>
	</dl>
	</dd>
      </dl>
      </dd>
    </dl>
    
    <p>For example, if command line looks like:</p>
    
    <dl>
      <dd>rpmrebuild --change-files="pgm1 a b c" --change-spec-pre="pgm2 bb" pkg</dd>
    </dl>
    
    <p>Then include file should be written like:</p>
    
    <dl>
      <dd>change-files pgm1 a b c<br />
      change-spec-pre pgm2 bb<br /></dd>
    </dl>
    
    <p><a name="lbAG" id="lbAG"> </a></p>
    
    <h2>FILES</h2>
    
    
    <dl>
      <dt class="c1">~/.rpmmacros</dt>
      
      <dd>is used by rpm when building packages (macros)</dd>
      
      <dt class="c1">$RPMREBUILD_TMPDIR/work</dt>
      
      <dd>directory where rpmrebuild put temporary files.</dd>
    </dl><a name="lbAH" id="lbAH"> </a>
    
    <h2>ENVIRONMENT</h2>
    
    
    <dl>
      <dt class="c1">RPMREBUILD_TMPDIR</dt>
      
      <dd>Directory for temporal files. If not set ~/.tmp/rpmrebuild.$$ is used.</dd>
      
      <dt class="c1">RPMREBUILD_OPTS</dt>
      
      <dd>This is another way to pass options to rpmrebuild (to use with care). It allows to change the default options
      on a host. For example to activate the un_prelink plugin, just set RPMREBUILD_OPTS="--include un_prelink.plug"</dd>
      
      <dt class="c1">VISUAL</dt>
      
      <dd>used to specify an editor for specfile. if not set <b>EDITOR</b> variable examined.</dd>
      
      <dt class="c1">EDITOR</dt>
      
      <dd>used to specify an editor for specfile. if not set <b>vi</b> used.</dd>
    </dl><a name="lbAI" id="lbAI"> </a>
    
    <h2>EXAMPLES</h2>
    
    
    <p>Build an rpm package as closed as possible to original one:</p>
    
    <p class="c3">rpmrebuild --batch package</p>
    
    <p>Build a modified package:</p>
    
    <p class="c3">rpmrebuild --keep-perm package</p>
    
    <p>Build a rpm from another rpm file:</p>
    
    <p class="c3">rpmrebuild --package --filter filter /usr/src/redhat/i386/package-i386.rpm</p>
    
    <p>rebuild and sign the bash package</p>
    
    <p class="c3">rpmrebuild --additional "--sign" bash</p>
    
    <p>Rebuild rpm as legacy (rpm[23]) package:</p>
    
    <p class="c3">rpmrebuild --additional "--nodirtokens" bash</p>
    
    <p>Specify generated rpm name:</p>
    
    <p class="c3">rpmrebuild --define "_rpmfilename %%{NAME}.rpm" bash</p>
    
    <p>Change package interactive</p>
    
    <p class="c3">rpmrebuild --package --change-files "/bin/bash" /some/place/bash.rpm</p>
    
    <p>Change package non-interactive</p>
    
    <p class="c3">rpmrebuild --package --change-files "a.sh &amp;&amp; b.sh" /some/place/bash.rpm</p>
    
    <p>if you have problem with rpm building, and if you know specfile syntax, you can also edit it:</p>
    
    <p class="c3">rpmrebuild --edit-whole package</p>
    
    <p>batch change of version tag</p>
    
    <p class="c3">rpmrebuild --change-spec-preamble='sed -e "s/^Version:.*/Version: YourVersion/"' YourPackage</p>
    
    <p><a name="lbAJ" id="lbAJ"> </a></p>
    
    <h2>AUTHORS</h2>
    
    
    <p>Eric Gerbier &lt;<a href="mailto:gerbier@users.sourceforge.net">gerbier@users.sourceforge.net</a>&gt;<br />
    Valery Reznic &lt;<a href=  "mailto:valery_reznic@users.sourceforge.net">valery_reznic@users.sourceforge.net</a>&gt;</p>
    
    <dl>
      <dt>See &lt;URL:<a href="http://rpmrebuild.sourceforge.net/">http://rpmrebuild.sourceforge.net/</a>&gt;.</dt>
    </dl><a name="lbAK" id="lbAK"> </a>
    
    <h2>NOTES</h2>
    
    
    <dl>
      <dt>rpmrebuild can not reproduce exactly a package, so</dt>
      
      <dd><br />
      - md5 checksum will not match original ones.<br />
      - gpg or pgp signatures are lost</dd>
      
      <dt>packages which contains file with globbing characters (* .. ? ) will not build</dt>
    </dl><a name="lbAL" id="lbAL"> </a>
    
    <h2>COPYRIGHT</h2>
    
    
    <p>rpmrebuild is copyright (C) 2002 by Eric Gerbier.<br />
      this program is distributed under GNU General Public License<br />
      It is provided "as is", without any express or implied warranties.<br />
    See the file COPYING for details.</p>
    
    <p><a name="lbAM" id="lbAM"> </a></p>
    
    <h2>SEE ALSO</h2>
    
    
    <p><a href="rpm">rpm</a>(8), <a href="rpmbuild">rpmbuild</a>(8), <a href=  "rpmrebuild_plugins">rpmrebuild_plugins</a>(1), 'man -k rrp' for plugins specific manpages.</p>
    <hr />
    <a name="index" id="index"> </a>
    
    <h2>Index</h2>
    
    
    <dl>
      <dt><a href="#lbAB">NAME</a></dt>
      
      <dt><a href="#lbAC">SYNOPSIS</a></dt>
      
      <dt><a href="#lbAD">DESCRIPTION</a></dt>
      
      <dt><a href="#lbAE">OPTIONS</a></dt>
      
      <dt><a href="#lbAF">INCLUDE FILES</a></dt>
      
      <dt><a href="#lbAG">FILES</a></dt>
      
      <dt><a href="#lbAH">ENVIRONMENT</a></dt>
      
      <dt><a href="#lbAI">EXAMPLES</a></dt>
      
      <dt><a href="#lbAJ">AUTHORS</a></dt>
      
      <dt><a href="#lbAK">NOTES</a></dt>
      
      <dt><a href="#lbAL">COPYRIGHT</a></dt>
      
      <dt><a href="#lbAM">SEE ALSO</a></dt>
    </dl>
    <hr />
    This document was created by man2html, using the manual pages.<br />
    Time: 13:38:13 GMT, August 15, 2013
  </body>
</html>
